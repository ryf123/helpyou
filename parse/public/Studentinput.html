<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>HYACSIS-Student Info Input</title>

    <!-- Bootstrap Core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="metisMenu/metisMenu.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="vendors/sb-admin-2.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link href="bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet">
	<link href="vendors/jquery.dataTables.min.css" rel="stylesheet">
	<link href="vendors/select2.min.css" rel="stylesheet">
        
	<style type="text/css">
		body {
			padding-top: 50px;
			padding-bottom: 30px;
		}
	
	table.table > tbody > tr > td {
		height: 30px;
		vertical-align: middle;
	}
	/* address.js css style for address*/
	.editable-address {
		display: block;
		margin-bottom: 5px;
	}
	
	.editable-address span {
		width: 70px;
		display: inline-block;
	}
	</style>
</head>

<body class="nav-md" style="padding-top: 0px">
    <div id="wrapper">
        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">
                    <div class="row">
                        <div class="col-lg-1">
                            <img src="hyaclogo.png" class="img-circle" alt="Cinque Terre" width="25" height="25">
                        </div>
                        <div class="col-lg-11">
                            HelpYouAchieve Student Information System
                        </div>
                    </div>
                    </a>
            </div>
            <!-- /.navbar-header -->
            
            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href='#' id="signoutbutton"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->
            
            <div class="navbar-default sidebar" role="navigation" style="
                width: 220px;
                margin-top: 51px;
                ">
                <div class="sidebar-nav navbar-collapse" style="
                width: 220px;
                ">
                    <ul class="nav" id="side-menu">
                        
                        
                        <li>
                            <a href="index.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-dashboard fa-fw"></i> Dashboard / 首页</a>
                        </li>
                        
                        
                        <!-- / Info inputs-->
                        <li>
                            <a href="#" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-edit fa-fw"></i> Info Inputs / 信息录入<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="districtform.html" style="
                                padding-left: 32px;
                                ">District Inputs / 学区信息</a>
                                </li>
                                <li>
                                    <a href="schoolform.html" style="
                                padding-left: 32px;
                                ">School Inputs / 学校信息</a>
                                </li>
                                <li>
                                    <a href="Studentinput.html" style="
                                padding-left: 32px;
                                ">Student Inputs / 学生信息</a>
                                </li>
                                <li>
                                    <a href="Registrationinput.html" style="
                                padding-left: 32px;
                                padding-right: 0px;
                                ">Registration Inputs / 注册信息</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <!-- /End of 1st - Info inputs-->
                        <li>
                            <a href="districtform.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-home fa-fw"></i> District / 学区</a>
                        </li>
                        <li>
                            <a href="schooltable.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-hospital-o fa-fw"></i> School / 学校</a>
                        </li>
                        <li>
                            <a href="studenttable.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-users fa-fw"></i> Student / 学生</a>
                        </li>
                        <li>
                            <a href="Registrationinput.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-pencil fa-fw"></i> Registration / 注册</a>
                        </li>
                        <li>
                            <a href="studentpickuptable.html" style="
                                padding-left: 10px;
                                padding-right: 10px;
                                ">
                                <i class="fa fa-th-list fa-fw"></i> Pickup Schedule / 接送安排</a>
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>
        <!--End of navbar-->

        <div id="page-wrapper" style="min-height: 260px;margin-left: 220px;boder-left-width: 0px;">
            <div class="row">
                 <br>
                <div class="col-lg-1" style="padding-right: 0px; width:">
                    <img src="hyaclogo.png" class="img-circle" alt="Cinque Terre" width="55" height="55">
                        </div>
                <div class="col-lg-11">
                    <h3 class="text-primary" style="margin-top: 10px">HYACSIS - Students Info Input</h3>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.End of 1st row -System Name -->
            <hr>
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-info" style="height: 730px;">
                        <div class="panel-heading" style="padding-left: 30px;">Students Information Input / 请输入学生信息</div>
                        <div class="panel-body" style="padding-bottom: 0px;">
                            <div id="msg" class="alert" style="padding-top: 0px; padding-bottom: 0px; margin-bottom: 0px;"></div>
                                <table id="user" class="table table-bordered table-striped" style="clear: both">
                                    <tbody>
                                        <tr>
                                            <td width="20%" align="right">姓</td>
                                            <td width="25%">Last Name</td>
                                            <td width="55%"><a href="#" class="myeditable" id="lastname" data-type="text" data-placeholder="Required"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">名</td>
                                            <td>First Name</td>
                                            <td><a href="#" id="firstname" class="myeditable" data-type="text" data-placeholder="Required"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">性别</td>
                                            <td>Gender</td>
                                            <td><a href="#" id="sex" class="myeditable" data-type="select" data-value=""></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">生日</td>
                                            <td>Birthday</td>
                                            <td><a href="#" id="dob" class="myeditable" data-type="combodate" data-value="2010-10-29" data-format="YYYY-MM-DD" data-viewformat="DD/MM/YYYY" data-template="D / MMM / YYYY"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">学校</td>
                                            <td>School</td>
                                            <td><a href="#" id="school" class="myeditable" data-type="select"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">年纪</td>
                                            <td>Grade</td>
                                            <td><a href="#" id="grade" class="myeditable" data-type="select" data-value=""></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">教室</td>
                                            <td>Room Number</td>
                                            <td><a href="#" id="roomnumber" class="myeditable" data-type="text"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">家庭地址</td>
                                            <td>Home Address</td>
                                            <td><a href="#" id="address" class="myeditable" data-type="address" ></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">联系人</td>
                                            <td>Contact Name</td>
                                            <td><a href="#" id="contact" class="myeditable" data-type="text" data-placeholder="Required"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">联系电话</td>
                                            <td>Phone Number (Primary)</td>
                                            <td><a href="#" id="phonenumber" class="myeditable" data-type="number" data-placeholder="Required"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">联系电话（备用）</td>
                                            <td>Phone Number (Secondary)</td>
                                            <td><a href="#" id="altphonenumber" class="myeditable" data-type="number"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">电子邮箱</td>
                                            <td>Email (Primary)</td>
                                            <td><a href="#" id="email" class="myeditable" data-type="email"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">电子邮箱（备用）</td>
                                            <td>Email (Secondary)</td>
                                            <td><a href="#" id="altemail" class="myeditable" data-type="email"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">入学日期</td>
                                            <td>First Day at School / </td>
                                            <td><a href="#" id="firstdayatschool" class="myeditable" data-type="combodate" data-value="2015-02-23" data-format="YYYY-MM-DD" data-viewformat="DD/MM/YYYY" data-template="D / MMM / YYYY"></a></td>
                                        </tr>
                                        <tr>
                                            <td align="right">联系方式：短信(默认)<br>/ 电子邮箱 / 不收取</td>
                                            <td>Contact Method: Text (Default) or Email<br> or not selected</td>
                                            <td><a href="#" id="contactmethod" class="myeditable" data-type="select" data-value="email"></a></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <hr style="margin-top: 0px;">
                            <div class="col-lg-12">
                                <span class="pull-left">
                                <button type="button" id="save-btn" class="btn btn-outline btn-success" class="pull-left">Save / 保存</button>
                                </span>
                                <span class="pull-right">
                                <button type="button" id="reset-btn" class="btn btn-outline btn-danger" class="pull-right">Reset / 重置</button>
                                </span>                                
                            </div>
                        </div>
                        <!-- End of Panel body -->
                    </div>
                    <!-- End of panel -->
                </div>
            </div>    
            <!-- Enf of Row -->
        </div>
        <!-- End of Page-wrapper -->
    </div>
    <!-- End of wrapper -->
    <!-- footer content -->
    <footer>
        <div class="">
            <p class="pull-right">Copyright ©2015 Evereast All Rights Reserved |
            <span class="lead"> <i class="fa fa-paw"></i> Evereast</span>
            </p>
        </div>
    </footer>
    <!-- /footer content --> 

    <!-- jQuery -->
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="metisMenu/metisMenu.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="vendors/sb-admin-2.js"></script>
	<!-- momentjs -->
	<script src="bootstrap-editable/js/moment.min.js"></script>
	<script src="vendors/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="vendors/parse.js"></script>
	<script src="bootstrap-editable/js/bootstrap-editable.js"></script>
	<script src="vendors/select2.min.js"></script>
	<script src="bootstrap-editable/js/address.js"></script>
</body>
<script>
		$(function(){
		  //initialize Parse
		  Parse.initialize("IMxHY4AEmtrLwyxSSrBx7fVdPAyCqUCIVczJZPWl","vT6GeGbec8Do6EZ3Wdny68iFFitjBGjus6ZOjpu0");
		  //defaults
		  //$.fn.editable.defaults.url = '/post';
		  var listschools = undefined;
		  Parse.Cloud.run('getobject', {objectname: 'School'}, {
			success: function(schools) {
						  var schoolsource = [];
						  schools = JSON.parse(JSON.stringify(schools));
						  for(index in schools){
						  var name = schools[index]["schoolname"];
						  schoolsource.push({"value":name,"text":name});
						  }
						  $('#school').editable({
												source: schoolsource
						  });
		  },
			error: function(error) {
						  console.log(error);
		   }
		   });
		  //editables
          $.fn.editable.defaults.mode = 'inline';
		  $('#lastname').editable({
			  name: 'lastname',
								  url : '',
			  validate: function(value) {
			  if($.trim(value) == ''){ return 'This field is required';
			  }
			  },
								  success: function(response, newValue) {
								  console.log(newValue);
								  }
		  });
		  
		  $('#firstname').editable({
								   url : '',
			   validate: function(value) {
					if($.trim(value) == ''){ return 'This field is required';
					}
			   }
		   });
		  
		  $('#sex').editable({
			 prepend: "not selected",
			 source: [
					  {value: "Male", text: 'Male'},
					  {value: "Female", text: 'Female'}
					  ],
			 display: function(value, sourceData) {
			 var colors = {"": "gray", 1: "green", 2: "blue"},
			 elem = $.grep(sourceData, function(o){return o.value == value;});
			 
			 if(elem.length) {
			 $(this).text(elem[0].text);
			 } else {
			 $(this).empty();
			 }
		 }
		 });
		  $('#grade').editable({
			 prepend: "not selected",
			 source: [
					  {value: "TK", text: 'TK'},
					  {value: "K", text: 'K'},
					  {value: "1", text: 'Grade 1'},
					  {value: "2", text: 'Grade 2'},
					  {value: "3", text: 'Grade 3'},
					  {value: "4", text: 'Grade 4'},
					  {value: "5", text: 'Grade 5'},
					  {value: "6", text: 'Grade 6'}
					  ],
			 display: function(value, sourceData) {
			 var colors = {"": "gray", 1: "green", 2: "blue"},
			 elem = $.grep(sourceData, function(o){return o.value == value;});
			 
			 if(elem.length) {
			 $(this).text(elem[0].text);
			 } else {
			 $(this).empty();
			 }
			 }
		  });
		  $('#status').editable();
		  $('#vacation').editable({
								  datepicker: {
								  todayBtn: 'linked'
								  }
								  });
		  
		  $('#dob').editable();
		  $('#roomnumber').editable();
		  $('#contact').editable();
		  $('#phonenumber').editable();
		  $('#altphonenumber').editable();
		  $('#email').editable();
		  $('#altemail').editable();
		  $('#firstdayatschool').editable();
		  $('#contactmethod').editable({
				 source: [
						  {value: "email", text: 'Text 短信'},
						  {value: "text", text: 'Email 电子邮箱'},
                          {value: "nocontact", text: 'Not Selected 不收取'}
						  ],
				 display: function(value, sourceData) {
				 elem = $.grep(sourceData, function(o){return o.value == value;});
				 
				 if(elem.length) {
				 $(this).text(elem[0].text);
				 } else {
				 $(this).empty();
				 }
		 }
		 });              
		  $('#address').editable({
				 value: {
				 city: "San Diego",
				 address: "",
				 zipcode: "92129"
				 },
				 validate: function(value) {
				 if(value.city == '') return 'city is required!'; 
				 },
				 display: function(value) {
				 if(!value) {
				 $(this).empty();
				 return; 
				 }
				 var html = '<b>' + $('<div>').text(value.city).html() + '</b>, ' + $('<div>').text(value.street).html() + ', ' + $('<div>').text(value.zipcode).html();
				 $(this).html(html);
				 }
			});
		  
		  
		  
		  $('#user .editable').on('hidden', function(e, reason){
			  if(reason === 'save' || reason === 'nochange') {
			  var $next = $(this).closest('tr').next().find('.editable');
			  if($('#autoopen').is(':checked')) {
			  setTimeout(function() {
						 $next.editable('show');
						 }, 300); 
			  } else {
			  $next.focus();
			  } 
			  }
		  });
		  
		  });
		  // save button validation
		  $('#save-btn').click(function() {
				var values = $('.myeditable').editable('submit',{
					 ajaxOptions: {
					 dataType: 'json' //assuming json response
					 },
					 success: function(data, config) {
					 console.log(data);
					 if(data && data.id) {  //record created, response like {"id": 2}
					 //set pk
					 $(this).editable('option', 'pk', data.id);
					 //remove unsaved class
					 $(this).removeClass('editable-unsaved');
					 //show messages
					 var msg = 'New user created! Now editables submit individually.';
					 $('#msg').addClass('alert-success').removeClass('alert-error').html(msg).show();
					 $('#save-btn').hide();
					 $(this).off('save.newuser');
					 } else if(data && data.errors){ 
					 //server-side validation error, response like {"errors": {"username": "username already exist"} }
					 config.error.call(this, data.errors);
					 }               
					 },
					 error: function(errors) {
					 var msg = '';
					 if(errors && errors.responseText) { //ajax error, errors = xhr object
					 msg = errors.responseText;
					 } else { //validation error (client-side or server-side)
					 $.each(errors, function(k, v) { msg += k+": "+v+"<br>"; });
					 } 
					 $('#msg').removeClass('alert-success').addClass('alert-error').html(msg).show();
					 }
					 });
					 var Student = Parse.Object.extend("Student");
					 var student = new Student();
							   for(key in values){
							   if (values.hasOwnProperty(key)){
							   student.set(key,values[key]);
							   }
							   }
							   student.save(null, {
							   success: function(gameScore) {
								  // Execute any logic that should take place after the object is saved.
								  alert('New object created with objectId: ' + student.id);
								  },
								  error: function(gameScore, error) {
								  // Execute any logic that should take place if the save fails.
								  // error is a Parse.Error with an error code and message.
								  alert('Failed to create new object, with error code: ' + error.message);
								  }
								});
		});
		// reset button
		$('#reset-btn').click(function() {
		  $('.myeditable').editable('setValue', null)  //clear values
		  .editable('option', 'pk', null)          //clear pk
		  .removeClass('editable-unsaved');        //remove bold css
		  });
        </script>
<style>
.navbar-default {
    background-color: #d9edf7;
    border-color: #bce8f1;
}
.sidebar ul li a.active {
  background-color: #d9edf7;
}
.nav>li>a:focus, .nav>li>a:hover{
  text-decoration: none;
  background-color: #fff;
}
.sidebar ul li a.active {
  background-color: #fff;
}
.navbar-default .navbar-brand {
  color: #337ab7;
}
.panel-footer {
  background-color: #fff;
  border-top: 1px solid #fff;
}
body {
    background-color: #d9edf7;
}
.form-control {
  border: 1px solid #bce8f1;
}
.btn-default {
  color: #337ab7;
  background-color: #fff;
  border-color: #bce8f1;
}
body {
  color: #337ab7;
}
</style>
</html>