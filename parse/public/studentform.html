
<head>
    <title>HYACSIS-Student Info Input</title>

    <!-- Date & Datetime picker -->
    <link href="vendors/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="vendors/bootstrap-datepicker.min.css" rel="stylesheet">
    <!-- Not sure -->
    <link href="bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet">
    <link href="vendors/jquery.dataTables.min.css" rel="stylesheet">
    <link href="vendors/select2.min.css" rel="stylesheet">
</head>
            <div class="row">
                <br>
                <div class="col-lg-1" style="padding-right: 0px; width:">
                    <img src="hyaclogo.png" class="img-circle" alt="Cinque Terre" width="55" height="55">
                        </div>
                <div class="col-lg-11">
                    <h3 class="text-primary" style="margin-top: 10px">HYACSIS - Student Info Input</h3>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.End of 1st row -System Name -->
			<hr>
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-info">
                        <div class="panel-heading" style="padding-left: 30px;">Student Information Input / 请输入学生信息</div>
                        <div class="panel-body">
                            <form class="form-horizontal form-label-left" id="studentform" data-toggle="validator">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="firstname">First Name / 名字 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="firstname" name="firstname" required="required" class="form-control col-md-7 col-xs-12" placeholder="First Name">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="lastname">Last Name / 姓氏 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="lastname" name="lastname" required="required" class="form-control col-md-7 col-xs-12" placeholder="Last Name">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Gender / 性别 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="btn-group" data-toggle="buttons">
                                            <label class="btn btn-default">
                                                <input type="radio" name="sex" value="male"> Male
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio" name="sex" value="female" checked=""> Female
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Date of Birth / 生日 </label>
                                        <div class='col-md-6 col-sm-6 col-xs-12'>
                                            <div class='input-group date ' id='dob' >
                                                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                                <input type='text' class="form-control" name="dob" placeholder="10/29/2010">
                                            </div>
                                        </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">School / 学校 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <select class="form-control" id='school' name='school'></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="grade">Grade / 年级 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="btn-group" data-toggle="buttons">
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="TK"> TK
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="K"> K
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="1"> G 1
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="2"> G 2
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="3"> G 3
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="4"> G 4
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="5"> G 5
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio"  name="grade" value="6"> G 6
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="roomnumber">Room Number / 教室 </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="roomnumber" name="roomnumber" class="form-control col-md-7 col-xs-12" placeholder="Room Number">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="studentaddress">Address / 地址 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="studentaddress" name="studentaddress" required="required" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="studentcity">City / 城市 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="studentcity" name="studentcity" required="required" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-3" for="studentzip">Zipcode / 邮编 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="studentzip" name="studentzip" required="required" class="form-control" data-inputmask="'mask': '99999'">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="contact">Contact / 联系人 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="contact" name="contact" required="required" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Contact Method / 联系方式 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="btn-group" data-toggle="buttons">
                                            <label class="btn btn-default">
                                                <input type="radio" name="contactmethod" value="text"> Text
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio" name="contactmethod" value="email"> Email
                                            </label>
                                            <label class="btn btn-default">
                                                <input type="radio" name="contactmethod" value="nocontact"> No Contact
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-3">Phone / 电话 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" id="phonenumber" name="phonenumber" data-inputmask="'mask' : '(999) 999-9999'">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-3">Phone (Alt) / 电话(备用) </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" id="altphonenumber" name="altphonenumber" data-inputmask="'mask' : '(999) 999-9999'">
                                    </div>
                                </div>      
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="email" >Email / 邮箱 <span class="required">*</span></label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="email" id="email" name="email" class="form-control col-md-7 col-xs-12" data-error="邮箱格式错误" placeholder="evereast@powayusd.com" required>
                                        <div class="help-block with-errors"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="altemail" >Email (Alt) / 邮箱(备用) </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="email" id="altemail" name="altemail" class="form-control col-md-7 col-xs-12" data-error="邮箱格式错误" placeholder="evereast@powayusd.com">
                                        <div class="help-block with-errors"></div>
                                    </div>
                                </div>
                                <hr>
                                <div class="form-group">
                                    <div class="col-md-3 col-sm-3 col-xs-12"></div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                    * 请输入该学生特殊接送要求（代替学校普通接送要求）。 e.g.: 该学生正常放学时间2:30 PM, 需要上西班牙语, 实际3:30 PM接，则在下输入学校名称及3:30 PM. <br>* Please input the special pickup request for the students (instead of student's regular school pickup hour).<br>* 临时日期将在注册表中选择 / Alternative Date will be choosen in Registration Input.
                                </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="temploc" >Alternative Location/临时地点 </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="temploc" class="form-control" name="temploc"  type="text">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="temptime" >Alternative Time/临时时间 </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class='input-group date ' id='temptime' >
                                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                            <input type='text' class="form-control" id="temptime" name="temptime" placeholder="13:00 PM">
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <!-- End of form -->
                            <hr>
                            <div class="col-lg-4"></div>
                            <div class="col-lg-4">
                                <span class="pull-left">
                                <button type="button" class="btn btn-outline btn-success" id="save">Save / 保存</button>
                                </span>                                
                            </div>
                            <!-- Button -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.End of 2nd row -->
        
        <!-- /End of heading   #page-wrapper  -->   


    <script type="text/javascript" src="vendors/wizard/jquery.smartWizard.js"></script>
    <!-- momentjs -->
    <script src="bootstrap-editable/js/moment.min.js"></script>

    <script type="text/javascript" src="vendors/bootstrap-datetimepicker.min.js"></script>
    <script src="vendors/bootstrap-datepicker.js"></script>
    <script src="vendors/inputmask.js"></script>
    <script src="vendors/jquery.inputmask.js"></script>
    <script src="vendors/validator.js"></script>
    <script src="vendors/select2.min.js"></script>

</body>
<script>
    Parse.initialize("IMxHY4AEmtrLwyxSSrBx7fVdPAyCqUCIVczJZPWl","vT6GeGbec8Do6EZ3Wdny68iFFitjBGjus6ZOjpu0");
    $( document ).ready(function() {
        // on save button click
        $("#save").click(function(){
            var submitdata = {}
            var formarray = $("form").serializeArray();
            for(index in formarray){
              var ele = formarray[index];
              submitdata[ele["name"]] = ele["value"];
            }
            Parse.Cloud.run('saveobject', { objectname: 'Student', objectvalue:submitdata,objectid:""}, {
            success: function() {
                location.reload();
            },
            error: function(error) {
            alert("Can't save, try again");
            }
            });
            console.log(submitdata);
        });
        // enable validator
        $("#phonenumber").inputmask();
        $("#studentzip").inputmask();
        $("#altphonenumber").inputmask();
        //Datetimepicker
        $("#dob").datepicker({
            multidate: false,
            startView: 2,
            clearBtn: true,
        });
        // datetimepicker
        $("#temptime").datetimepicker({
            format: "LT",
        });
        // get school list
        Parse.Cloud.run('getobject', {objectname: 'School'}, {
            success: function(schools) {
                var schoolsource = [];
                schools = JSON.parse(JSON.stringify(schools));
                for(index in schools){
                var name = schools[index]["schoolname"];
                schoolsource.push({"value":name,"text":name});
                tobeappend = "<option value='"+name+"'>"+name+"</option>";
                $("#school").append(tobeappend);
                }
            },
            error: function(error) {
                console.log(error);
           }
        });
        if(Parse.User.current() == undefined){
            $(location).attr('href','login.html');
        }
      });
</script>
<style type="text/css">
    .btn-default.active { 
        background-color: #337ab7;
        color:#fff; 
    }
</style>

