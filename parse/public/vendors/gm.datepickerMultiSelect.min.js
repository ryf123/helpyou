/*! gm.datepickerMultiSelect 2015-07-07 */
!function(){angular.module("gm.datepickerMultiSelect",["ui.bootstrap"]).config(["$provide",function(a){a.decorator("daypickerDirective",["$delegate",function(a){var b=a[0],c=b.link;return b.compile=function(){return function(a,b,d,e){function f(){angular.forEach(a.rows,function(a){angular.forEach(a,function(a){a.selected=g.indexOf(a.date.setHours(0,0,0,0))>-1})})}c.apply(this,arguments);var g=[];a.$on("update",function(a,b){g=b,f()}),a.$emit("requestSelectedDates"),a.$watch(function(){return e.activeDate.getTime()},f)}},a}])}]).directive("multiSelect",function(){return{require:["ngModel"],link:function(a,b,c){var d,e;a.$on("requestSelectedDates",function(){a.$broadcast("update",d)}),a.$watchCollection(c.multiSelect,function(b){d=b||[],a.$broadcast("update",d)}),c.$observe("selectRange",function(a){e=!!a&&"false"!==a}),a.$watch(c.ngModel,function(a){if(a){var b=a.getTime();if(e){if(!d.length||d.length>1||d[0]==b)return d.splice(0,d.length,b);d.push(b);var c=Math.min.apply(null,d),f=Math.max.apply(null,d);for(c=new Date(c).setHours(24);f>c;)d.push(c),c=new Date(c).setHours(24)}else d.indexOf(b)<0?d.push(b):d.splice(d.indexOf(b),1)}})}}})}();